# ğŸ¤– ComfyUI + AnimateDiff Setup Guide for custom texttoimagetovideo_comfyui_animatediff

A comprehensive setup guide and environment structure for using **ComfyUI** with **AnimateDiff** for animation generation workflows.

---

## ğŸŒ Recommended Directory Structure

```
A:/OPENAI/
â””â”€â”€ ComfyUI/
    â”œâ”€â”€ main.py
    â”œâ”€â”€ requirements.txt
    â”œâ”€â”€ comfyenv/              â† your virtual environment
    â””â”€â”€ custom_nodes/
```

---

## âœ… Prerequisites

### 1. Install Python

Download and install **Python 3.10** or **3.11** from:
[https://www.python.org/downloads/](https://www.python.org/downloads/)

---

## âš¡ Clone and Setup ComfyUI

```bash
git clone https://github.com/comfyanonymous/ComfyUI.git
cd ComfyUI
```

### Optional: Install Video Helper Extension

```bash
cd custom_nodes
git clone https://github.com/comfyanonymous/ComfyUI-VideoHelperExtension.git
```

---

## ğŸ“š Setup Virtual Environment

```bash
python -m venv comfyenv
.\comfyenv\Scripts\activate
pip install -r requirements.txt
deactivate
```

---

## ğŸ‘¨â€ğŸ’¨ Install AnimateDiff Node

```bash
cd ComfyUI/custom_nodes
# Pick one of the working repos

git clone https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved.git
cd ComfyUI-AnimateDiff-Evolved
pip install -r requirements.txt
```

---

## ğŸ“‚ Add Models

### 1. AnimateDiff Model (v3.1 recommended)

* Download: `v3_sd15_mm.ckpt`
* Place into: `ComfyUI/models/animatediff_models/`

### 2. Stable Diffusion Base Model

* Recommended: `RealisticVisionV60B1_v51HyperVAE.safetensors`
* Place into: `ComfyUI/models/checkpoints/`

### 3. VAE (optional)

* File: `vae-ft-mse-840000-ema-pruned.safetensors`
* Place into: `ComfyUI/models/vae/`

---

## ğŸ‘©â€ğŸ’³ Install ComfyUI Manager

```bash
cd ComfyUI/custom_nodes/
git clone https://github.com/ltdrdata/ComfyUI-Manager.git
```

---

## ğŸ”„ Workflow Build Order

1. Prompt Generator
2. AnimateDiff Loader
3. KSampler / Euler
4. Checkpoint Loader
5. Conditioning + Latent Input
6. AnimateDiff Video Frame Node
7. VAE Decoder
8. Save Image / MP4

> Save the workflow JSON into: `ComfyUI/workflows/`

---

## ğŸ§ª CUDA Fix (if required)

```bash
pip uninstall torch torchvision torchaudio -y
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121

python
>>> import torch
>>> print(torch.cuda.is_available())  # Should return True
```

---

## ğŸ•¹ï¸ Launch the App

```bash
# From the ComfyUI folder:
python main.py
```

Visit in browser: [http://127.0.0.1:8188](http://127.0.0.1:8188)

---

## ğŸ“– JSON Node Requirement (Post-May 2024)

Every node must include:

* `mode`
* `order`
* `flags`
* `properties`
* `inputs` (array)
* `outputs` (array)

---

## ğŸ“ AnimateDiff Quick Start (Alt Script)

```bash
git clone https://github.com/guoyww/AnimateDiff.git
cd AnimateDiff
pip install -r requirements.txt
```

### Run Samples:

```bash
python -m scripts.animate --config configs/prompts/1_animate/1_1_animate_RealisticVision.yaml
```

---

## ğŸ“† Recommended Files Checklist

| Type             | File                                     | Location                    |
| ---------------- | ---------------------------------------- | --------------------------- |
| Base Model       | realisticVisionV51.safetensors           | models/checkpoints/         |
| VAE (optional)   | vae-ft-mse-840000-ema-pruned.safetensors | models/vae/                 |
| Motion Module    | v3\_sd15\_mm.ckpt                        | models/animatediff\_models/ |
| AnimateDiff Node | ComfyUI-AnimateDiff-Evolved              | custom\_nodes/              |

---

## ğŸ” Useful Repos and Extensions

* [ComfyUI](https://github.com/comfyanonymous/ComfyUI)
* [AnimateDiff Evolved](https://github.com/continue-revolution/AnimateDiff)
* [ComfyUI Manager](https://github.com/ltdrdata/ComfyUI-Manager)
* [VHS](https://github.com/Kosinkadink/ComfyUI-VideoHelperSuite)
* [WAS Node Suite](https://github.com/WASasquatch/was-node-suite-comfyui)

---

## ğŸ“‹ License

MIT License. Refer to individual repositories for original licenses.

---

## âœ… Summary: What You Should Have

```
ComfyUI/
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ animatediff_models/       âœ“ v3_sd15_mm.ckpt
â”‚   â”œâ”€â”€ checkpoints/              âœ“ RealisticVisionV51.safetensors
â”‚   â”œâ”€â”€ vae/                      âœ“ VAE (optional)
â”‚
â”œâ”€â”€ custom_nodes/
â”‚   â”œâ”€â”€ ComfyUI-AnimateDiff-Evolved/
â”‚   â”œâ”€â”€ ComfyUI-VideoHelperSuite/
â”‚   â”œâ”€â”€ ComfyUI-Manager/
â”‚   â””â”€â”€ (optional control net)
â”‚
â”œâ”€â”€ input/
â”œâ”€â”€ output/
â”œâ”€â”€ main.py
```

Ready to Animate! ğŸš€


